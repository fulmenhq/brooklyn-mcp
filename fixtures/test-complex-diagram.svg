<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="450" viewBox="0 0 600 450" xmlns="http://www.w3.org/2000/svg">
  <title>Complex Diagram - Brooklyn MCP Architecture</title>
  <desc>Complex SVG diagram with multiple elements for comprehensive processing tests</desc>
  
  <!-- Excessive metadata for compression testing -->
  <metadata>
    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
             xmlns:dc="http://purl.org/dc/elements/1.1/"
             xmlns:cc="http://creativecommons.org/ns#">
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title>Brooklyn MCP Architecture Diagram</dc:title>
        <dc:creator>Brooklyn MCP Test Suite</dc:creator>
        <dc:description>Test fixture for complex diagram processing</dc:description>
        <dc:date>2024</dc:date>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  
  <!-- Multiple unused definitions for optimization testing -->
  <defs>
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
  
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2ecc71;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
    </linearGradient>
  
    <!-- Unused gradient for testing removal -->
    <linearGradient id="unusedGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ff0000;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#cc0000;stop-opacity:1" />
    </linearGradient>
  
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
  
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#000000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="600" height="450" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1"/>
  
  <!-- Title -->
  <text x="300" y="30" text-anchor="middle" font-family="Arial, sans-serif"
        font-size="20" font-weight="bold" fill="#2c3e50">
    Brooklyn MCP Architecture Flow
  </text>
  
  <!-- Component boxes -->
  <g id="client-layer">
    <rect x="50" y="70" width="120" height="60" rx="5" ry="5"
          fill="url(#blueGradient)" stroke="#2980b9" stroke-width="2" filter="url(#shadow)"/>
    <text x="110" y="95" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="12" font-weight="bold" fill="#ffffff">
      Claude Code
    </text>
    <text x="110" y="110" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="10" fill="#ecf0f1">
      MCP Client
    </text>
  </g>
  
  <g id="transport-layer">
    <rect x="250" y="70" width="120" height="60" rx="5" ry="5"
          fill="url(#greenGradient)" stroke="#27ae60" stroke-width="2" filter="url(#shadow)"/>
    <text x="310" y="95" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="12" font-weight="bold" fill="#ffffff">
      MCP Transport
    </text>
    <text x="310" y="110" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="10" fill="#d5f4e6">
      HTTP/STDIO
    </text>
  </g>
  
  <g id="server-layer">
    <rect x="450" y="70" width="120" height="60" rx="5" ry="5"
          fill="#e74c3c" stroke="#c0392b" stroke-width="2" filter="url(#shadow)"/>
    <text x="510" y="95" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="12" font-weight="bold" fill="#ffffff">
      Brooklyn Server
    </text>
    <text x="510" y="110" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="10" fill="#fadbd8">
      Image Processing
    </text>
  </g>
  
  <!-- Service boxes -->
  <g id="services">
    <rect x="100" y="200" width="100" height="50" rx="3" ry="3"
          fill="#9b59b6" stroke="#8e44ad" stroke-width="1.5"/>
    <text x="150" y="225" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="11" font-weight="bold" fill="#ffffff">
      SVG Compress
    </text>
  
    <rect x="250" y="200" width="100" height="50" rx="3" ry="3"
          fill="#f39c12" stroke="#e67e22" stroke-width="1.5"/>
    <text x="300" y="225" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="11" font-weight="bold" fill="#ffffff">
      Format Convert
    </text>
  
    <rect x="400" y="200" width="100" height="50" rx="3" ry="3"
          fill="#1abc9c" stroke="#16a085" stroke-width="1.5"/>
    <text x="450" y="225" text-anchor="middle" font-family="Arial, sans-serif"
          font-size="11" font-weight="bold" fill="#ffffff">
      Image Analysis
    </text>
  </g>
  
  <!-- Arrows connecting components -->
  <line x1="170" y1="100" x2="250" y2="100"
        stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <line x1="370" y1="100" x2="450" y2="100"
        stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Vertical arrows to services -->
  <line x1="150" y1="130" x2="150" y2="200"
        stroke="#7f8c8d" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <line x1="300" y1="130" x2="300" y2="200"
        stroke="#7f8c8d" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <line x1="450" y1="130" x2="450" y2="200"
        stroke="#7f8c8d" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Process flow indicators -->
  <g id="flow-indicators">
    <text x="210" y="95" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
      MCP Tools
    </text>
    <text x="410" y="95" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
      Process
    </text>
  </g>
  
  <!-- Output section -->
  <rect x="50" y="320" width="500" height="80" rx="5" ry="5"
        fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" stroke-dasharray="5,5"/>
  
  <text x="300" y="340" text-anchor="middle" font-family="Arial, sans-serif"
        font-size="14" font-weight="bold" fill="#2c3e50">
    Output Formats
  </text>
  
  <text x="100" y="365" font-family="Courier New, monospace" font-size="11" fill="#34495e">
    • Compressed SVG (30-70% size reduction)
  </text>
  <text x="100" y="380" font-family="Courier New, monospace" font-size="11" fill="#34495e">
    • High-quality PNG conversion
  </text>
  <text x="350" y="365" font-family="Courier New, monospace" font-size="11" fill="#34495e">
    • Complexity analysis &amp; recommendations
  </text>
  <text x="350" y="380" font-family="Courier New, monospace" font-size="11" fill="#34495e">
    • Batch processing capabilities
  </text>
  
  <!-- Footer -->
  <text x="300" y="435" text-anchor="middle" font-family="Arial, sans-serif"
        font-size="10" fill="#95a5a6" font-style="italic">
    Brooklyn MCP v1.6.0 - Enterprise Image Processing
  </text>
</svg>
