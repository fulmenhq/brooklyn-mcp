# Brooklyn MCP v0.2.3 Release Notes

**Release Date**: 2025-01-19
**Release Type**: Minor Release - Dependency Updates & Protocol Compliance
**Status**: âœ… Ready for Release

---

## Overview

Brooklyn v0.2.3 focuses on dependency modernization with careful attention to MCP protocol compliance. This release upgrades core logging and CLI infrastructure while maintaining strict adherence to the Model Context Protocol's stdout purity requirements.

---

## What's New

### Dependency Updates

#### Logging Stack Modernization

- **pino**: v9 â†’ v10.1.0 (major upgrade)
- **pino-pretty**: v11 â†’ v13.1.2 (major upgrade)

**Benefits**:

- Improved logging performance and type safety
- Enhanced pino v10 compatibility with MessageFirstLogMethod overlay
- Better structured logging for production environments

#### CLI Tooling Enhancement

- **inquirer**: v9 â†’ v13.0.1 (major upgrade)

**Benefits**:

- Better interactive prompt experience in CLI commands
- Enhanced user input validation
- Improved terminal compatibility

### Protocol Compliance

#### dotenv Pinning (Critical)

- **Decision**: Pinned `dotenv` to exactly v16.6.1 (no `^` prefix)
- **Reason**: dotenv v17.x pollutes stdout with package information, violating MCP protocol requirements

**Why This Matters**:

- Brooklyn operates as a JSON-RPC service over stdio (stdin/stdout)
- MCP protocol requires **absolute stdout purity** - only JSON-RPC messages allowed
- Any extraneous output breaks protocol compliance and causes AI agent failures
- All 4 stdout purity integration tests pass with v16.6.1, fail with v17.x

**Documentation**: See `docs/architecture/notes/package-dependencies-special-handling.md` for detailed analysis and unblock criteria.

---

## Improvements

### Build Process

- Fixed CLI binary testing to use local `./dist/brooklyn` instead of globally installed version
- Eliminates confusing ENOENT errors during development
- Lazy-loaded xml2js dependency to prevent bundling issues

### Documentation

- Added package dependencies special handling guide
- Created v0.3.0 feature brief for MCP SDK upgrade
- Created preliminary vitest v4 upgrade plan

---

## Quality Metrics

### Test Coverage

- **Total Tests**: 768 (755 passing, 13 skipped)
- **Test Suite Time**: ~87 seconds
- **Quality Gates**: All passing (format, typecheck, lint, tests)

### MCP Protocol Compliance

- **Stdout Purity Tests**: 4/4 passing âœ…
- **MCP Schema Compliance**: All tools valid âœ…
- **Protocol**: JSON-RPC 2.0 over stdio âœ…

---

## Breaking Changes

**None** - This is a backward-compatible release.

---

## Migration Guide

### For Users

No action required. Brooklyn v0.2.3 is a drop-in replacement for v0.2.2.

### For Developers

If you maintain a fork or extension of Brooklyn:

1. **dotenv Dependency**: Note that dotenv is now pinned to v16.6.1 for MCP protocol compliance
2. **Pino Logger**: Review type compatibility if you use Brooklyn's logger directly
3. **CLI Commands**: Inquirer v13 may have different prompt behavior if you've customized CLI flows

---

## Known Issues

### dotenv v17.x Blocked

- **Issue**: Cannot upgrade to dotenv v17.x due to stdout pollution
- **Impact**: Must stay on v16.6.1 until issue is resolved
- **Tracking**: See `docs/architecture/notes/package-dependencies-special-handling.md`
- **Unblock Criteria**:
  - Option A: dotenv v17.x eliminates stdout output
  - Option B: Find configuration to suppress output
  - Option C: Team decides MCP purity not critical (unlikely)

---

## Upgrade Instructions

### Using npm/bun

```bash
# Update Brooklyn globally
bun add -g brooklyn-mcp@0.2.3

# Or update in your project
bun add brooklyn-mcp@0.2.3
```

### Using Binary Release

Download the latest binary from [GitHub Releases](https://github.com/3leaps/brooklyn-mcp/releases/tag/v0.2.3):

- macOS: `brooklyn-darwin-x64` or `brooklyn-darwin-arm64`
- Linux: `brooklyn-linux-x64` or `brooklyn-linux-arm64`
- Windows: `brooklyn-windows-x64.exe`

### Verification

```bash
brooklyn version
# Should output: 0.2.3

brooklyn version --extended
# Verify pino and inquirer versions are upgraded
```

---

## What's Next

### v0.3.0 Planning

The v0.3.0 release will focus on:

1. **MCP SDK Upgrade**: v0.5.0 â†’ v1.22.0 (major protocol update)
2. **Live Agent Testing**: Comprehensive validation with Claude Code and other AI agents
3. **Transport Layer**: Potential HTTP transport enhancements
4. **Test Infrastructure**: Vitest v4 upgrade (preliminary planning)

**Timeline**: v0.3.0 estimated 8-12 days development + testing

---

## Contributors

### AI Co-Maintainers

- **Paris Brooklyn** (@paris-brooklyn) - MCP Platform Architect & Integration Lead
  - Led dependency upgrade strategy (Phases 1-3)
  - Identified and documented dotenv v17 blocking issue
  - Created v0.3.0 planning documentation

### Human Maintainers

- **Dave Thompson** (@3leapsdave) - Project Lead & Primary Maintainer
  - Supervised dependency upgrade process
  - Reviewed and approved pinning strategy
  - Release management

---

## Additional Resources

- **Changelog**: [CHANGELOG.md](../../../CHANGELOG.md)
- **Migration Guide**: [Dependency Updates Plan](.plans/active/v0.2.3/dependency-updates-plan.md)
- **Package Dependencies**: [Special Handling Guide](../../architecture/notes/package-dependencies-special-handling.md)
- **v0.3.0 Planning**: [MCP SDK Upgrade Brief](.plans/active/v0.3.0/mcp-sdk-upgrade-feature-brief.md)

---

## Support

- **Issues**: [GitHub Issues](https://github.com/3leaps/brooklyn-mcp/issues)
- **Discussions**: [GitHub Discussions](https://github.com/3leaps/brooklyn-mcp/discussions)
- **Documentation**: [docs.brooklyn-mcp.dev](https://docs.brooklyn-mcp.dev)

---

**Generated by**: ðŸŒ‰ Paris Brooklyn - MCP Platform Architect
**Approved by**: @3leapsdave
**Release Status**: âœ… Ready for Release
