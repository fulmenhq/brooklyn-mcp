# Brooklyn MCP Server Environment Configuration
# Copy this file to .env and customize for your deployment
# 
# ğŸ“š For comprehensive deployment guidance, see:
#    docs/deployment/http-transport-deployment.md
#    docs/deployment/tls-configuration.md

# =============================================================================
# CORE SERVICE CONFIGURATION
# =============================================================================

# Service Identity
BROOKLYN_SERVICE_NAME=brooklyn-mcp-server
BROOKLYN_VERSION=1.6.0
BROOKLYN_ENV=development
BROOKLYN_TEAM_ID=default

# Transport Configuration
BROOKLYN_MCP_ENABLED=true
BROOKLYN_HTTP_ENABLED=true
BROOKLYN_PORT=3000
BROOKLYN_HOST=127.0.0.1

# =============================================================================
# ğŸ” AUTHENTICATION CONFIGURATION (v1.6.0)
# See: docs/deployment/http-transport-deployment.md for complete setup guide
# =============================================================================

# Authentication Mode Selection
# Supported modes: "github" | "local" | "none"
BROOKLYN_AUTH_MODE=none

# Development Mode (REQUIRED for "none" mode)
# Set to "true" only for local development - NEVER in production
BROOKLYN_AUTH_DEVELOPMENT_ONLY=true

# TLS Configuration for Production
# Set to "true" when running behind reverse proxy with TLS termination
BROOKLYN_AUTH_BEHIND_PROXY=false

# GitHub OAuth Provider Configuration
# Required when BROOKLYN_AUTH_MODE=github
# Create GitHub OAuth App: https://github.com/settings/applications/new
BROOKLYN_GITHUB_CLIENT_ID=your_github_app_client_id
BROOKLYN_GITHUB_CLIENT_SECRET=your_github_app_client_secret
BROOKLYN_GITHUB_CALLBACK_URL=https://brooklyn.company.com/oauth/callback

# GitHub Access Control - Organization Level
# Comma-separated list of allowed GitHub organizations
BROOKLYN_GITHUB_ALLOWED_ORGS=fulmenhq,company-org

# GitHub Access Control - Team Level (Optional)
# Format: "org1:team1,team2;org2:team3,team4"
# More granular than organization-level access
BROOKLYN_GITHUB_ALLOWED_TEAMS=fulmenhq:brooklyn-team,admins;company-org:developers

# GitHub OAuth Scopes
# Default scopes for user info and organization membership
BROOKLYN_GITHUB_SCOPES=user:email,read:org

# Local Authentication Provider Configuration
# Required when BROOKLYN_AUTH_MODE=local
BROOKLYN_LOCAL_USER_STORE=/opt/brooklyn/users.json
BROOKLYN_LOCAL_SESSION_TIMEOUT=86400000
BROOKLYN_LOCAL_REQUIRE_PASSWORD_CHANGE=false
BROOKLYN_LOCAL_MAX_FAILED_ATTEMPTS=5
BROOKLYN_LOCAL_LOCKOUT_DURATION=300000

# =============================================================================
# BROWSER AUTOMATION SETTINGS
# =============================================================================

# Browser Pool Configuration
BROOKLYN_MAX_BROWSERS=10
BROOKLYN_BROWSER_TYPE=chromium
BROOKLYN_HEADLESS=true
BROOKLYN_BROWSER_TIMEOUT=30000
BROOKLYN_BROWSER_PATH=

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Rate Limiting
BROOKLYN_RATE_LIMIT_REQUESTS=100
BROOKLYN_RATE_LIMIT_WINDOW=60000

# Domain Access Control
BROOKLYN_ALLOWED_DOMAINS=*

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging Level and Format
BROOKLYN_LOG_LEVEL=info
BROOKLYN_LOG_FORMAT=pretty
BROOKLYN_LOG_FILE=

# =============================================================================
# PATHS CONFIGURATION
# =============================================================================

# Directory Paths
BROOKLYN_CONFIG_DIR=
BROOKLYN_LOG_DIR=
BROOKLYN_PLUGIN_DIR=
BROOKLYN_BROWSER_DIR=
BROOKLYN_PID_DIR=

# =============================================================================
# ğŸ“‹ DEPLOYMENT EXAMPLES
# Complete configuration examples for different environments
# =============================================================================

# ğŸš€ PRODUCTION CONFIGURATION
# GitHub OAuth with team-based access control
#
# BROOKLYN_ENV=production
# BROOKLYN_AUTH_MODE=github
# BROOKLYN_AUTH_BEHIND_PROXY=true
# BROOKLYN_GITHUB_CLIENT_ID=ghp_your_production_client_id
# BROOKLYN_GITHUB_CLIENT_SECRET=your_production_client_secret
# BROOKLYN_GITHUB_CALLBACK_URL=https://brooklyn.company.com/oauth/callback
# BROOKLYN_GITHUB_ALLOWED_TEAMS=company:platform-team,devops;partner:contractors
# BROOKLYN_HTTP_HOST=127.0.0.1
# BROOKLYN_PORT=3000
# BROOKLYN_MAX_BROWSERS=25
# BROOKLYN_HEADLESS=true
# BROOKLYN_LOG_LEVEL=info
# BROOKLYN_LOG_FORMAT=json

# ğŸ§ª STAGING CONFIGURATION
# GitHub OAuth with organization access
#
# BROOKLYN_ENV=production
# BROOKLYN_AUTH_MODE=github
# BROOKLYN_AUTH_BEHIND_PROXY=true
# BROOKLYN_GITHUB_CLIENT_ID=ghp_your_staging_client_id
# BROOKLYN_GITHUB_CLIENT_SECRET=your_staging_client_secret
# BROOKLYN_GITHUB_CALLBACK_URL=https://brooklyn-staging.company.com/oauth/callback
# BROOKLYN_GITHUB_ALLOWED_ORGS=company-org
# BROOKLYN_PORT=3000
# BROOKLYN_MAX_BROWSERS=10
# BROOKLYN_LOG_LEVEL=debug

# ğŸ’» DEVELOPMENT CONFIGURATION
# No authentication (development only)
#
# BROOKLYN_ENV=development
# BROOKLYN_AUTH_MODE=none
# BROOKLYN_AUTH_DEVELOPMENT_ONLY=true
# BROOKLYN_HTTP_HOST=0.0.0.0
# BROOKLYN_PORT=3000
# BROOKLYN_MAX_BROWSERS=5
# BROOKLYN_HEADLESS=false
# BROOKLYN_LOG_LEVEL=debug
# BROOKLYN_LOG_FORMAT=pretty

# ğŸ¢ LOCAL AUTHENTICATION CONFIGURATION
# File-based authentication for self-hosted environments
#
# BROOKLYN_ENV=production
# BROOKLYN_AUTH_MODE=local
# BROOKLYN_LOCAL_USER_STORE=/opt/brooklyn/users.json
# BROOKLYN_LOCAL_SESSION_TIMEOUT=86400000
# BROOKLYN_PORT=3000
# BROOKLYN_LOG_LEVEL=info

# =============================================================================
# ğŸ“– REFERENCE DOCUMENTATION
# =============================================================================
# 
# Complete Setup Guides:
# â€¢ HTTP Transport: docs/deployment/http-transport-deployment.md
# â€¢ TLS Configuration: docs/deployment/tls-configuration.md
# â€¢ Authentication: GitHub OAuth setup and user management
# 
# Configuration Schema:
# â€¢ Validation: schemas/brooklyn-config-v1.yaml
# â€¢ All config files validated against JSON Schema 2020
#
# Environment Variables Reference:
# â€¢ All BROOKLYN_* variables documented above
# â€¢ Override any JSON config with environment variables
# â€¢ Precedence: CLI > ENV > Config File > Defaults