#!/bin/sh

# Brooklyn Pre-commit Hook
# Fast tests only - no external dependencies required

echo "ğŸŒ‰ Brooklyn Pre-commit Checks..."

# 1. Code formatting
echo "ğŸ“ Formatting code..."
bun run format:code

# 2. TypeScript validation
echo "ğŸ” Type checking..."
bun run typecheck || {
  echo "âŒ TypeScript errors found. Please fix before committing."
  exit 1
}

# 3. Linting
echo "ğŸ§¹ Linting..."
bun run lint || {
  echo "âŒ Linting errors found. Please fix before committing."
  exit 1
}

# 4. Fast tests (unit + mock-based integration)
echo "ğŸ§ª Running fast tests..."
bun run test:precommit || {
  echo "âŒ Tests failed. Please fix before committing."
  exit 1
}

echo "âœ… All pre-commit checks passed!"